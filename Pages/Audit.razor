@page "/audit"
@inject IDialogService DialogService
@inject IJSRuntime JSRuntime
@inject AuditService AuditService

<MudPaper Class="pa-4">
    <MudStack Direction="Row" Justify="SpaceBetween" AlignItems="Center" Class="mb-2">
        <MudText Typo="Typo.h5">Audit Log</MudText>
        <MudMenu Icon="@Icons.Material.Filled.MoreVert" Dense="true">
            <MudMenuItem OnClick="OpenFilterDialog">üîç –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä</MudMenuItem>
            <MudMenuItem OnClick="ClearFilters">‚ùå –û—á–∏—Å—Ç–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä</MudMenuItem>
            <MudMenuItem OnClick="ExportToCsv">üìÑ –ï–∫—Å–ø–æ—Ä—Ç —É CSV</MudMenuItem>
        </MudMenu>
    </MudStack>

    <MudTable Items="filteredEntries" Dense="true" Bordered="true" Striped="true" Hover="true">
        <HeaderContent>
            <MudTh>Username</MudTh>
            <MudTh>Target</MudTh>
            <MudTh>Date</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Username">@context.Username</MudTd>
            <MudTd DataLabel="Target">@context.Target</MudTd>
            <MudTd DataLabel="Date">@context.Timestamp.ToString("dd.MM.yyyy HH:mm")</MudTd>
        </RowTemplate>
    </MudTable>
</MudPaper>
